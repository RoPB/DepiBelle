service cloud.firestore {
  match /databases/
  { database }
  /documents {
    match /
    { document=** }
    {
      allow read,
      write: if
      request.auth!=null;
    }
    match /environment/dev
    {
      match /orders/ordersInProcess/
      { date }
      / { orderId }
      {
        allow create,
        delete: if
        true; allow
        update: if
        request.resource.data.attendedBy!=null &&
        resource.data.attendedBy==null;
      }
      match /orders/ordersAttended/
      { document=** }
      {
        allow
        create: if
        true;
      }
    }
    match /environment/production
    {
      match /orders/ordersInProcess/
      { date }
      / { orderId }
      {
        allow create,
        delete: if
        true; allow
        update: if
        request.resource.data.attendedBy!=null &&
        resource.data.attendedBy==null;
      }
      match /orders/ordersAttended/
      { document=** }
      {
        allow
        create: if
        true;
      }
    }
  }

}
